# IpeGraph
IpeGraphは，ドロー系画像作成ソフトウェア[Ipe](http://ipe.otfried.org/)の上で使用する，グラフを描画するための拡張機能です。

グラフ描画とファイル出力機能を持つソフトウェアからグラフが描画されたIpeファイルを書き出し，Ipe上でグラフの見た目の編集を行う機能を実現します。

現在においては，MatlabからIpeファイルを書き出すことができます。他のグラフ出力機能を持つソフトウェアへの対応は，要望があればやると思います。

## 導入方法
1. 本リポジトリをcloneもしくはdownload zipする。
ipegraph.isyとmatlab2ipegraph.mを使用する。

1. グラフ描画ソフト側の準備
   * Matlabの場合
      1. Matlabを起動し，メニューのホーム -> パスの設定でパスの設定ウインドウを表示し，matlab2ipegraph.mが存在するフォルダーを追加する。
        またはパスの設定に含まれているフォルダにmファイルを移動する。
      1. パスの設定ウインドウを保存ボタンで閉じる。
      2. Enjoy!!
2. Ipe側の準備
   1. `Ipeのインストールディレクトリ/styles`フォルダにipegraph.isyファイルをコピーする。
    スタイルファイルを置くフォルダを変更している場合には，そのフォルダに
   2. Enjoy!!

## 使用方法
IpeGraphを使用したグラフ作成ワークフローを示す。

1. Matlabでグラフを描く。グラフのグラフィックスハンドルを記録しておく。
```hfig = figure; plot(...)```
3. 書き出したいグラフのグラフィックスハンドルをmatlab2ipegraph関数に入力する。
```matlab2ipegraph(hfig, [width height], outputname);```
width, heightはpt(=1/72 inchの方) 単位で指定する。Ipe上で自由に変更できるので大体の大きさでよい。
outputnameは出力ディレクトリ+ファイル名を拡張子なしで指定する。
4. グラフのIpeファイルとデータ列のtxtファイルが出力される。
5. グラフのIpeファイルがコンパイル時に参照するディレクトリにデータ列のtxtファイルを移動する。
6. Ipeファイルを開き，編集できる。
7. グラフを他のIpeファイルにコピーして編集することもできる。
コピーする時はコピー先のIpeファイルのstyle sheetsにipegraph.isyを追加する必要と，コピー先のIpeファイルがコンパイル時に参照するディレクトリにデータのtxtファイルをコピーする必要がある。

## 対応範囲
Matlabのplot, stairs, semilogx, semilogy, loglog関数が出力するグラフにのみ対応しています。他の関数が出力するグラフを処理するとエラーを返します。
対応するグラフの種類は順次追加予定ですが，scatter, plot3は追加が保証されています。
